<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kru Pai Classroom ‚Äî Articles Quiz + Vocabulary Gate (30 ‡∏Ç‡πâ‡∏≠)</title>
<style>
  :root{
    --bg:#f7fbff;
    --primary:#0d47a1;
    --accent:#1976d2;
    --ink:#0b2545;
    --muted:#6b8bb6;
    --good:#2e7d32;
    --bad:#c62828;
    --card:#ffffff;
    --shadow:0 10px 30px rgba(13,71,161,.08);
    --radius:18px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:'Segoe UI',system-ui,-apple-system,Arial,sans-serif;color:var(--ink);
       background:linear-gradient(180deg,var(--bg),#eaf2ff 60%);min-height:100vh;}
  header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;
         position:sticky;top:0;z-index:5;background:rgba(247,251,255,.75);
         backdrop-filter:saturate(1.2) blur(6px);border-bottom:1px solid #e3eefc;}
  .brand{display:flex;gap:10px;align-items:center;font-weight:700;color:var(--primary);}
  .brand .mark{width:38px;height:38px;border-radius:12px;background:var(--accent);
               display:grid;place-items:center;color:#fff;box-shadow:var(--shadow);font-weight:900;}
  .container{max-width:980px;margin:26px auto;padding:0 16px 60px;}
  .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:22px;margin:18px 0;}
  h1,h2,h3{margin:8px 0 14px} h1{font-size:clamp(24px,3.2vw,34px);color:var(--primary)}
  h2{font-size:clamp(20px,2.4vw,26px);color:var(--accent)} p{line-height:1.6}
  label{display:block;margin:10px 0;padding:12px 14px;border:1.5px solid #e5efff;border-radius:12px;cursor:pointer;font-size:18px}
  input[type="radio"]{accent-color:var(--accent);transform:scale(1.2);margin-right:8px}
  .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 18px;border-radius:14px;border:0;
       background:var(--primary);color:#fff;font-weight:700;box-shadow:0 8px 18px rgba(13,71,161,.18);cursor:pointer;transition:transform .05s ease;font-size:16px}
  .btn:active{transform:translateY(1px)} .btn.secondary{background:var(--accent)} .btn.ghost{background:#fff;color:var(--primary);border:2px solid #cfe3ff}
  .btn.danger{background:var(--bad)} .btn.good{background:var(--good)}
  .toolbar{display:flex;gap:10px;flex-wrap:wrap}
  .muted{color:var(--muted);font-size:14px} .big{font-size:20px} .center{text-align:center}
  .hidden{display:none !important}
  .badge{display:inline-flex;align-items:center;gap:8px;background:#e9f2ff;border:1px solid #cfe3ff;color:var(--primary);
         padding:8px 12px;border-radius:999px;font-weight:600;}
  .scoreboard{display:flex;align-items:center;justify-content:space-between;gap:12px;background:#e9f2ff;border:1px solid #cfe3ff;border-radius:14px;
              padding:10px 14px;margin-bottom:10px;font-weight:700;color:var(--primary)}
  .question{font-size:20px;margin-bottom:8px}
  .footer-note{text-align:center;color:#90a4d4;margin-top:22px;font-size:14px}
  .grid-2{display:grid;grid-template-columns:1fr;gap:16px}
  @media (min-width:860px){.grid-2{grid-template-columns:1.1fr .9fr}}
  .list{margin:0;padding-left:18px} .list li{margin:6px 0}
  .pill{display:inline-block;background:#e9f2ff;border:1px solid #cfe3ff;color:var(--primary);
        padding:4px 10px;border-radius:999px;font-size:13px;margin-right:6px}
  .no-article{font-style:italic;color:#6b8bb6}
  table{width:100%;border-collapse:separate;border-spacing:0;overflow:hidden;border-radius:14px;border:1px solid #e3eefc}
  th,td{padding:10px 12px;border-bottom:1px solid #eaf2ff}
  th{background:#e9f2ff;color:var(--primary);text-align:left}
  tr:last-child td{border-bottom:none}
  .vocab-grid{display:grid;grid-template-columns:1fr;gap:16px}
  @media(min-width:860px){.vocab-grid{grid-template-columns:1fr 1fr}}
</style>
</head>
<body>
<header>
  <div class="brand">
    <div class="mark">KP</div>
    <div>
      Kru Pai Classroom<br/><span class="muted">Articles ‚Äî Grammar Game + Vocabulary Gate</span>
    </div>
  </div>
  <div class="badge">‡πÇ‡∏ó‡∏ô‡∏™‡∏µ: ‡∏ü‡πâ‡∏≤‚Äì‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏á</div>
</header>

<div class="container">

  <!-- START -->
  <section id="screen-start" class="card">
    <h1 class="center">üêß ‡πÄ‡∏Å‡∏° Articles: a / an / the / ‚Äì üê±</h1>
    <p class="center big">‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‚Üí ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå 60 ‡∏Ñ‡∏≥ ‚Üí ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏é ‚Üí ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö 30 ‡∏Ç‡πâ‡∏≠</p>
    <div class="card">
      <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
        <input id="playerName" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô Nam, Mint, Top" style="width:100%;padding:12px 14px;margin-top:6px;border-radius:12px;border:1.5px solid #cfe3ff;font-size:18px">
      </label>
      <div class="toolbar">
        <button class="btn secondary" onclick="goVocab()">‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå (60 ‡∏Ñ‡∏≥)</button>
      </div>
    </div>
    <div class="footer-note">¬© Kru Pai Classroom ‚Ä¢ ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏î‡πá‡∏Å‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‚Äì‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏ï‡πâ‡∏ô</div>
  </section>

  <!-- VOCAB GATE -->
  <section id="screen-vocab" class="card hidden">
    <h2>üìñ Vocabulary Gate ‚Äî ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏π‡πâ (60 ‡∏Ñ‡∏≥)</h2>
    <p class="muted">*‡∏Ñ‡∏≥‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ó‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ñ‡∏≠‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô</p>
    <div class="vocab-grid">
      <div class="card">
        <table>
          <thead><tr><th>English</th><th>‡∏Ñ‡∏≥‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ó‡∏¢</th><th>‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•</th></tr></thead>
          <tbody id="vocabCol1"></tbody>
        </table>
      </div>
      <div class="card">
        <table>
          <thead><tr><th>English</th><th>‡∏Ñ‡∏≥‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ó‡∏¢</th><th>‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•</th></tr></thead>
          <tbody id="vocabCol2"></tbody>
        </table>
      </div>
    </div>
    <div class="toolbar" style="margin-top:10px">
      <button class="btn ghost" onclick="backToStart()">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <button class="btn" onclick="goRules()">‡πÑ‡∏õ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏é Articles</button>
    </div>
  </section>

  <!-- RULES -->
  <section id="screen-rules" class="card hidden">
    <h2>üìò ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Articles (‡∏¢‡πà‡∏≠)</h2>
    <div class="grid-2">
      <div class="card">
        <h3>üß© ‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô‡πÑ‡∏´‡∏ô</h3>
        <ul class="list">
          <li><span class="pill">a</span> ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏≤‡∏°‡∏ô‡∏±‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏≠‡∏Å‡∏û‡∏à‡∏ô‡πå‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ ‚Äú‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏û‡∏¢‡∏±‡∏ç‡∏ä‡∏ô‡∏∞‚Äù (a dog)</li>
          <li><span class="pill">an</span> ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏≤‡∏°‡∏ô‡∏±‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏≠‡∏Å‡∏û‡∏à‡∏ô‡πå‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ ‚Äú‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏£‡∏∞‚Äù ‡∏´‡∏£‡∏∑‡∏≠ h ‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á (an apple, an hour)</li>
          <li><span class="pill">the</span> ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏π‡∏î‡∏ñ‡∏∂‡∏á‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á/‡∏£‡∏π‡πâ‡∏Å‡∏±‡∏ô (the sun, the book we discussed)</li>
          <li><span class="pill">‚Äì</span> ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ article ‡∏Å‡∏±‡∏ö‡∏ô‡∏≤‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ/‡∏ô‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ/‡∏û‡∏´‡∏π‡∏û‡∏à‡∏ô‡πå/‡∏ß‡∏¥‡∏ä‡∏≤/‡∏Å‡∏µ‡∏¨‡∏≤ (water, music, cats)</li>
        </ul>
      </div>
      <div class="card">
        <h3>üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö</h3>
        <ul class="list">
          <li>‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡∏ß‡πà‡∏≤ ‚Äú‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‚Äù ‚Üí <b>an</b> hour, <b>a</b> university</li>
          <li>‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏°‡∏±‡∏Å‡πÉ‡∏ä‡πâ <b>a/an</b>; ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏≠‡∏≤‡∏à‡πÉ‡∏ä‡πâ <b>the</b></li>
        </ul>
      </div>
    </div>
    <div class="toolbar">
      <button class="btn ghost" onclick="backToStart()">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <button class="btn" onclick="startQuiz()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏° 30 ‡∏Ç‡πâ‡∏≠</button>
    </div>
  </section>

  <!-- QUIZ -->
  <section id="screen-quiz" class="hidden">
    <div class="scoreboard">
      <div>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô: <span id="playerLabel">-</span></div>
      <div>‡∏Ç‡πâ‡∏≠: <span id="qIndex">1</span>/<span id="qTotal">30</span></div>
    </div>
    <div class="card">
      <div class="question" id="qText">‚ùì ...</div>
      <div id="options"></div>
      <div class="toolbar" style="margin-top:8px">
        <button class="btn secondary" onclick="nextQuestion()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
      </div>
      <div class="muted">* ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î ‚Äú‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‚Äù</div>
    </div>
    <div class="toolbar">
      <button class="btn ghost" onclick="confirmQuit()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>
  </section>

  <!-- RESULT -->
  <section id="screen-result" class="card hidden">
    <h2 class="center">üéâ ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô üèÜ</h2>
    <div class="card center">
      <p class="big">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á <b id="playerFinal">-</b></p>
      <p class="big">‡πÑ‡∏î‡πâ <b id="scoreNum">0</b> / <b id="scoreDen">30</b>  (<b id="scorePct">0%</b>)</p>
      <p id="passNote" class="big" style="font-weight:800;color:var(--good)">‡∏ú‡πà‡∏≤‡∏ô üåü</p>
      <p id="failNote" class="big hidden" style="font-weight:800;color:var(--bad)">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô (‡πÄ‡∏Å‡∏ì‡∏ë‡πå 80%) üí™</p>
    </div>
    <div class="toolbar center" style="justify-content:center;margin-top:6px">
      <button class="btn" onclick="retryQuiz()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà</button>
      <button class="btn ghost" onclick="backToStart()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
      <button id="viewAnsBtn" class="btn danger hidden" onclick="showAnswers()">‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢</button>
    </div>
    <p class="muted center" id="attemptInfo"></p>
    <p class="muted center">üåü ‡∏™‡∏π‡πâ ‡πÜ ‡∏ô‡∏∞! ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô üåü</p>
  </section>

  <!-- ANSWERS -->
  <section id="screen-answers" class="card hidden">
    <h2>üìó ‡πÄ‡∏â‡∏•‡∏¢ Articles (30 ‡∏Ç‡πâ‡∏≠)</h2>
    <ol id="answerList"></ol>
    <div class="toolbar">
      <button class="btn" onclick="backToStart()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>
  </section>

</div>

<script>
const PASS_RATE = 0.80;
let player = "";
let current = 0;
let selections = [];
let attemptsMade = 0;   // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÄ‡∏™‡∏£‡πá‡∏à
let everFailed = false; // ‡πÄ‡∏Ñ‡∏¢‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏´‡∏°

// ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠
const OPTIONS = ["a","an","the","‚Äì"];

// ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå 60 ‡∏Ñ‡∏≥ (2 ‡∏Ñ‡∏≥‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠) ‚Äî English, ThaiPronounce, ThaiMeaning
const VOCABS = [
  ["cat","‡πÅ‡∏Ñ‡∏ó","‡πÅ‡∏°‡∏ß"], ["garden","‡∏Å‡∏≤‡∏£‡πå‡πÄ‡∏î‡∏¥‡∏ô","‡∏™‡∏ß‡∏ô"],
  ["orange","‡∏≠‡∏≠‡πÄ‡∏£‡πá‡∏ô‡∏à‡πå","‡∏™‡πâ‡∏°"], ["want","‡∏ß‡∏≠‡∏ô‡∏ó‡πå","‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£"],
  ["park","‡∏û‡∏≤‡∏£‡πå‡∏Å","‡∏™‡∏ß‡∏ô‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞"], ["yesterday","‡πÄ‡∏¢‡∏™-‡πÄ‡∏ó‡∏≠‡∏∞-‡πÄ‡∏î‡∏¢‡πå","‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô"],
  ["music","‡∏°‡∏¥‡∏ß-‡∏™‡∏¥‡∏Ñ","‡∏î‡∏ô‡∏ï‡∏£‡∏µ"], ["like","‡πÑ‡∏•‡∏Å‡πå","‡∏ä‡∏≠‡∏ö"],
  ["book","‡∏ö‡∏∏‡πä‡∏Å","‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠"], ["desk","‡πÄ‡∏î‡∏™‡∏Å‡πå","‡πÇ‡∏ï‡πä‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠"],
  ["honest","‡∏≠‡∏≠‡πÄ‡∏ô‡∏™‡∏ï‡πå","‡∏ã‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏ï‡∏¢‡πå"], ["man","‡πÅ‡∏°‡∏ô","‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢"],
  ["playground","‡πÄ‡∏û‡∏•‡∏¢‡πå-‡∏Å‡∏£‡∏≤‡∏ß‡∏ô‡∏î‡πå","‡∏™‡∏ô‡∏≤‡∏°‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏•‡πà‡∏ô"], ["school","‡∏™‡∏Ñ‡∏π‡∏•","‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"],
  ["milk","‡∏°‡∏¥‡∏•‡∏Å‡πå","‡∏ô‡∏°"], ["morning","‡∏°‡∏≠‡∏£‡πå-‡∏ô‡∏¥‡∏á","‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤"],
  ["umbrella","‡∏≠‡∏±‡∏°-‡πÄ‡∏ö‡∏£‡∏•-‡∏•‡∏≤","‡∏£‡πà‡∏°"], ["buy","‡∏ö‡∏≤‡∏¢","‡∏ã‡∏∑‡πâ‡∏≠"],
  ["children","‡∏ä‡∏¥‡∏•-‡πÄ‡∏î‡∏£‡∏ô","‡πÄ‡∏î‡πá‡∏Å ‡πÜ"], ["story","‡∏™‡∏ï‡∏≠-‡∏£‡∏µ","‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏≤"],
  ["river","‡∏£‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡πå","‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥"], ["near","‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡πå","‡πÉ‡∏Å‡∏•‡πâ"],
  ["apple","‡πÅ‡∏≠‡∏õ-‡πÄ‡∏û‡∏¥‡∏•","‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡∏•"], ["would you like","‡∏ß‡∏π‡πâ‡∏î‡∏à‡∏π‡πÑ‡∏•‡∏Å‡πå","‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÑ‡∏´‡∏°"],
  ["teacher","‡∏ó‡∏µ-‡πÄ‡∏ä‡∏≠‡∏£‡πå","‡∏Ñ‡∏£‡∏π"], ["this","‡∏î‡∏¥‡∏™","‡∏ô‡∏µ‡πâ"],
  ["water","‡∏ß‡∏≠-‡πÄ‡∏ó‡∏≠‡∏£‡πå","‡∏ô‡πâ‡∏≥"], ["cook","‡∏Ñ‡∏∏‡πâ‡∏Å","‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£"],
  ["hotel","‡πÇ‡∏Æ-‡πÄ‡∏ó‡∏•","‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°"], ["beach","‡∏ö‡∏µ‡∏ä","‡∏ä‡∏≤‡∏¢‡∏´‡∏≤‡∏î"],
  ["sun","‡∏ã‡∏±‡∏ô","‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå"], ["sky","‡∏™‡∏Å‡∏≤‡∏¢","‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤"],
  ["egg","‡πÄ‡∏≠‡πá‡∏Å‡∏Å‡πå","‡πÑ‡∏Ç‡πà"], ["breakfast","‡πÄ‡∏ö‡∏£‡∏Ñ-‡∏ü‡∏±‡∏™‡∏ó‡πå","‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤"],
  ["spiders","‡∏™‡πÑ‡∏õ-‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ã","‡πÅ‡∏°‡∏á‡∏°‡∏∏‡∏°"], ["don‚Äôt like","‡πÇ‡∏î‡∏ô‡∏ó‡πå‡πÑ‡∏•‡∏Å‡πå","‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö"],
  ["window","‡∏ß‡∏¥‡∏ô-‡πÇ‡∏î‡∏ß‡πå","‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á"], ["open","‡πÇ‡∏≠‡πÄ‡∏û‡∏¥‡∏ô","‡πÄ‡∏õ‡∏¥‡∏î"],
  ["pen","‡πÄ‡∏û‡∏ô","‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤"], ["shop","‡∏ä‡πá‡∏≠‡∏õ","‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤"],
  ["elephant","‡πÄ‡∏≠-‡∏•‡∏∞-‡πÅ‡∏ü‡∏ô‡∏ó‡πå","‡∏ä‡πâ‡∏≤‡∏á"], ["never","‡πÄ‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå","‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢"],
  ["stars","‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ã","‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß"], ["tonight","‡∏ó‡∏π‡πÑ‡∏ô‡∏ó‡πå","‡∏Ñ‡∏∑‡∏ô‡∏ô‡∏µ‡πâ"],
  ["book","‡∏ö‡∏∏‡πä‡∏Å","‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠"], ["gave","‡πÄ‡∏Å‡∏ü","‡πÉ‡∏´‡πâ (‡∏ä‡πà‡∏≠‡∏á 2)"],
  ["old","‡πÇ‡∏≠‡∏•‡∏î‡πå","‡πÄ‡∏Å‡πà‡∏≤"], ["friend","‡πÄ‡∏ü‡∏£‡∏ô‡∏î‡πå","‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô"],
  ["supermarket","‡∏ã‡∏π-‡πÄ‡∏õ‡∏≠‡∏£‡πå-‡∏°‡∏≤-‡πÄ‡∏Å‡πá‡∏ï","‡∏ã‡∏π‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏°‡∏≤‡∏£‡πå‡πÄ‡∏Å‡πá‡∏ï"], ["near our house","‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡πå ‡πÄ‡∏≠‡∏≤‡πÄ‡∏≠‡∏≠‡∏£‡πå ‡πÄ‡∏Æ‡∏≤‡∏™‡πå","‡πÉ‡∏Å‡∏•‡πâ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏£‡∏≤"],
  ["information","‡∏≠‡∏¥‡∏ô-‡∏ü‡∏≠‡∏£‡πå-‡πÄ‡∏°-‡∏ä‡∏±‡∏ô","‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"], ["decision","‡∏î‡∏¥-‡∏ã‡∏¥-‡∏ä‡∏±‡∏ô","‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à"],
  ["new","‡∏ô‡∏¥‡∏ß","‡πÉ‡∏´‡∏°‡πà"], ["phone","‡πÇ‡∏ü‡∏ô","‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå"],
  ["owl","‡∏≠‡∏≤‡∏ß‡∏•‡πå","‡∏ô‡∏Å‡∏Æ‡∏π‡∏Å"], ["tree","‡∏ó‡∏£‡∏µ","‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ"],
  ["moon","‡∏°‡∏π‡∏ô","‡∏û‡∏£‡∏∞‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå"], ["looked at","‡∏•‡∏∏‡∏Ñ‡∏ó‡πå ‡πÅ‡∏≠‡∏ó","‡∏°‡∏≠‡∏á‡∏î‡∏π"],
  ["coffee","‡∏Ñ‡∏≠‡∏ü-‡∏ü‡∏µ","‡∏Å‡∏≤‡πÅ‡∏ü"], ["evening","‡∏≠‡∏µ‡∏ü-‡∏ô‡∏¥‡πà‡∏á","‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ô"]
];

// 30 ‡∏Ç‡πâ‡∏≠ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢ a/an/the/‚Äì
const questions = [
  {text:"I saw ___ cat in the garden.", answer:"a"},
  {text:"She wants ___ orange.", answer:"an"},
  {text:"We went to ___ park yesterday.", answer:"the"},
  {text:"He likes ___ music.", answer:"‚Äì"},
  {text:"There is ___ book on the desk.", answer:"a"},
  {text:"My father is ___ honest man.", answer:"an"},
  {text:"They are playing in ___ playground near the school.", answer:"the"},
  {text:"She usually drinks ___ milk in the morning.", answer:"‚Äì"},
  {text:"I bought ___ umbrella.", answer:"an"},
  {text:"The children are reading ___ story about animals.", answer:"a"},
  {text:"He lives near ___ river.", answer:"the"},
  {text:"Would you like ___ apple?", answer:"an"},
  {text:"She is ___ teacher at this school.", answer:"a"},
  {text:"We need ___ water to cook rice.", answer:"‚Äì"},
  {text:"We stayed at ___ hotel near the beach.", answer:"a"},
  {text:"The sun is shining in ___ sky.", answer:"the"},
  {text:"He ate ___ egg for breakfast.", answer:"an"},
  {text:"I don‚Äôt like ___ spiders.", answer:"‚Äì"},
  {text:"Can you open ___ window, please?", answer:"the"},
  {text:"She bought ___ pen from the shop.", answer:"a"},
  {text:"He has never seen ___ elephant.", answer:"an"},
  {text:"There are ___ stars in the sky tonight.", answer:"‚Äì"},
  {text:"She was reading ___ book I gave her.", answer:"the"},
  {text:"I met ___ old friend yesterday.", answer:"an"},
  {text:"We went to ___ supermarket near our house.", answer:"the"},
  {text:"He needs ___ information before making a decision.", answer:"‚Äì"},
  {text:"She wants to buy ___ new phone.", answer:"a"},
  {text:"I saw ___ owl sitting on the tree.", answer:"an"},
  {text:"We looked at ___ moon.", answer:"the"},
  {text:"He never drinks ___ coffee in the evening.", answer:"‚Äì"}
];

function $(id){return document.getElementById(id)}
function show(id){$(id).classList.remove("hidden")}
function hide(id){$(id).classList.add("hidden")}
function switchTo(ids){["screen-start","screen-vocab","screen-rules","screen-quiz","screen-result","screen-answers"].forEach(hide); ids.forEach(show);}
function backToStart(){switchTo(["screen-start"]);}

function goVocab(){
  // render vocab table (split roughly half into 2 columns)
  const half = Math.ceil(VOCABS.length/2);
  const col1 = VOCABS.slice(0, half);
  const col2 = VOCABS.slice(half);
  $("vocabCol1").innerHTML = col1.map(([en,thp,thm])=>`<tr><td>${en}</td><td>${thp}</td><td>${thm}</td></tr>`).join("");
  $("vocabCol2").innerHTML = col2.map(([en,thp,thm])=>`<tr><td>${en}</td><td>${thp}</td><td>${thm}</td></tr>`).join("");
  switchTo(["screen-vocab"]);
}

function goRules(){
  const n = $("playerName").value.trim();
  player = n || "Player";
  $("playerLabel").textContent = player;
  switchTo(["screen-rules"]);
}

function startQuiz(){
  selections = Array(questions.length).fill(null);
  current = 0;
  $("playerLabel").textContent = player;
  $("qTotal").textContent = questions.length;
  renderQuestion();
  switchTo(["screen-quiz"]);
}

function renderQuestion(){
  const q = questions[current];
  $("qIndex").textContent = current + 1;
  $("qText").innerHTML = "‚ùì " + q.text.replace("___", "<b>___</b>");
  const OPTIONS = ["a","an","the","‚Äì"];
  $("options").innerHTML = OPTIONS.map(opt=>{
    const id = `q${current}_${opt}`;
    const checked = selections[current]===opt ? "checked" : "";
    const display = (opt==="‚Äì") ? "(no article)" : opt;
    return `<label><input type="radio" name="q${current}" id="${id}" value="${opt}" ${checked}> ${display}</label>`;
  }).join("");
}

function nextQuestion(){
  const radios = document.querySelectorAll(`input[name="q${current}"]`);
  let chosen = null;
  radios.forEach(r=>{ if(r.checked) chosen = r.value; });
  if(chosen===null){
    alert("‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏à‡πä‡∏∞");
    return;
  }
  selections[current] = chosen;
  if(current < questions.length - 1){
    current++; renderQuestion();
  }else{
    finishQuiz();
  }
}

function finishQuiz(){
  let correct = 0;
  selections.forEach((ans,i)=>{ if(ans===questions[i].answer) correct++; });
  const pct = Math.round((correct/questions.length)*100);
  const passed = (correct/questions.length) >= PASS_RATE;

  attemptsMade += 1;
  if(!passed){ everFailed = true; }

  $("playerFinal").textContent = player;
  $("scoreNum").textContent = correct;
  $("scoreDen").textContent = questions.length;
  $("scorePct").textContent = pct + "%";
  $("passNote").classList.toggle("hidden", !passed);
  $("failNote").classList.toggle("hidden", passed);

  // RULE:
  // 1) ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å "‡∏ú‡πà‡∏≤‡∏ô" -> ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
  // 2) ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å "‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô" -> ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Ñ‡∏£‡∏ö‡∏≠‡∏µ‡∏Å 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 2 ‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ) ‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢‡πÑ‡∏î‡πâ
  let canView = false;
  if(attemptsMade === 1 && passed){
    canView = true;
  } else if (everFailed && attemptsMade >= 2){
    canView = true;
  }

  $("viewAnsBtn").classList.toggle("hidden", !canView);

  $("attemptInfo").textContent = canView
    ? (attemptsMade===1 && passed
        ? "‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å ‚Äî ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏î‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢"
        : `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß ${attemptsMade} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡πÄ‡∏Ñ‡∏¢‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô) ‚Äî ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏î‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢‡πÑ‡∏î‡πâ`)
    : (attemptsMade===1 && !passed
        ? "‡∏¢‡∏±‡∏á‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‚Äî ‡∏•‡∏≠‡∏á‡∏ó‡∏≥‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞"
        : "‡∏¢‡∏±‡∏á‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ");

  switchTo(["screen-result"]);
}

function retryQuiz(){
  startQuiz(); // ‡∏Ñ‡∏á attemptsMade / everFailed ‡∏ï‡∏≤‡∏°‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤
}

function confirmQuit(){
  if(confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å‡πÑ‡∏´‡∏°? ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏ß‡πâ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å")) backToStart();
}

function showAnswers(){
  const ol = $("answerList");
  ol.innerHTML = "";
  questions.forEach((q,idx)=>{
    const li = document.createElement("li");
    li.style.margin="8px 0";
    const user = selections[idx] ?? "(‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)";
    const ok = user===q.answer;
    const ansShow = q.answer==="‚Äì" ? "<span class='no-article'>(no article)</span>" : q.answer;
    li.innerHTML = `${q.text.replace("___", "<b>"+ansShow+"</b>")} <br>
      <span class="${ok?'':'muted'}">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <b style="color:${ok?'var(--good)':'var(--bad)'}">${user}</b></span>`;
    ol.appendChild(li);
  });
  switchTo(["screen-answers"]);
}
</script>
</body>
</html>
